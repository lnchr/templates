version: "1.0"

metadata:
  name: ghost
  display_name: Ghost
  description: |
    Professional publishing platform with built-in
    memberships, newsletters, and content monetization.
  tags: [cms, blog, publishing]
  icon: newspaper

databases:
  ghost-db:
    type: mysql

volumes:
  ghost-content:
    size_limit: 5368709120

applications:
  ghost:
    app_type: web
    source_type: docker_image
    image_url: ghost:5-alpine
    exposed_ports: [2368]
    replicas: 1
    cpu_limit: "0.5"
    memory_limit: 512M
    icon_url: https://cdn.jsdelivr.net/gh/selfhst/icons@main/png/ghost.png
    color: "#15171a"
    depends_on: [ghost-db]
    volumes:
      - name: ghost-content
        mount_path: /var/lib/ghost/content
    env:
      database__client: mysql
      database__connection__host: ${ghost-db.host}
      database__connection__port: ${ghost-db.port}
      database__connection__user: ${ghost-db.user}
      database__connection__password: ${ghost-db.password}
      database__connection__database: ${ghost-db.database}
