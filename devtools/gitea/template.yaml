version: "1.0"

metadata:
  name: gitea
  display_name: Gitea
  description: |
    Lightweight self-hosted Git service with CI/CD,
    issue tracking, and package registry.
  tags: [git, devtools, ci-cd]
  icon: git-branch

databases:
  gitea-db:
    type: postgres

volumes:
  gitea-data:
    size_limit: 10737418240

applications:
  gitea:
    app_type: web
    source_type: docker_image
    image_url: gitea/gitea:1
    exposed_ports: [3000]
    replicas: 1
    cpu_limit: "0.5"
    memory_limit: 512M
    healthcheck_path: /api/healthz
    icon_url: https://cdn.jsdelivr.net/gh/selfhst/icons@main/png/gitea.png
    color: "#609926"
    depends_on: [gitea-db]
    volumes:
      - name: gitea-data
        mount_path: /data
    env:
      GITEA__database__DB_TYPE: postgres
      GITEA__database__HOST: ${gitea-db.host}:${gitea-db.port}
      GITEA__database__NAME: ${gitea-db.database}
      GITEA__database__USER: ${gitea-db.user}
      GITEA__database__PASSWD: ${gitea-db.password}
